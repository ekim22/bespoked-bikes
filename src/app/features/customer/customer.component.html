<table mat-table
       [dataSource]="customers$" multiTemplateDataRows
       class="mat-elevation-z8">
  <ng-container matColumnDef="{{column}}" *ngFor="let column of displayedColumns">
    <th mat-header-cell *matHeaderCellDef> {{column}} </th>
    <td mat-cell *matCellDef="let product"> {{product[column | columnKey] | transformDate}}</td>
  </ng-container>

  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
  <ng-container matColumnDef="expandedDetail">
    <td mat-cell *matCellDef="let product" [attr.colspan]="displayedColumns.length">
      <div class="detail"
           [@detailExpand]="product == expandedRow ? 'expanded' : 'collapsed'">

        <div class="profile-pic"></div>

        <form #productForm="ngForm">
          <div class="expanded-details-row">
            <div class="expanded-details-column">
              <mat-form-field appearance="legacy">
                <mat-label>First Name</mat-label>
                <input matInput type="text" id="firstName" required [ngModel]="product['firstName']" name="firstName" autocomplete="off" readonly="true">
              </mat-form-field>
            </div>
            <div class="expanded-details-column">
              <mat-form-field appearance="legacy">
                <mat-label>Last Name</mat-label>
                <input matInput type="text" id="lastName" required [ngModel]="product['lastName']" name="lastName" autocomplete="off" readonly="true">
              </mat-form-field>
            </div>
            <div class="expanded-details-column">
              <mat-form-field appearance="legacy">
                <mat-label>Address Name</mat-label>
                <input matInput type="text" id="address" required [ngModel]="product['address']" name="address" autocomplete="off" readonly="true">
              </mat-form-field>
            </div>
            <div class="expanded-details-column">
              <mat-form-field appearance="legacy">
                <mat-label>Phone</mat-label>
                <input matInput type="text" id="phone" required [ngModel]="product['phone']" name="phone"  autocomplete="off" readonly="true">
              </mat-form-field>
            </div>
          </div>
          <div class="expanded-details-row">
            <div class="expanded-details-column">
              <mat-form-field appearance="legacy">
                <mat-label>Start Date</mat-label>
                <input matInput type="text" id="startDate" required [ngModel]="product['startDate'] | date:'M/d/yy'" name="startDate"  autocomplete="off" readonly="true">
              </mat-form-field>
            </div>
          </div>
        </form>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let product; columns: displayedColumns;"
      class="row"
      [class.row]="expandedRow === product"
      (click)="expandedRow = expandedRow === product ? null : product">
  </tr>
  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="row-detail"></tr>
</table>
